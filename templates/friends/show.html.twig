{% extends 'base.html.twig' %}

{% block title %}Your search result{% endblock %}

{% block body %}
    <div class="page-header">
        <h1 style="text-align:center;"> Search results </h1>
    </div> <br/>
    <div class="card" style="width:125%;">
    <div class="card-body">
    <p class="card-text">
        <h4>Users:</h4>
    <table class="table">

        <tr>
            <th>Id</th>
            <th>Username</th>
            <th>Profile picture</th>
            <th>E-mail </th>
            <th>Gender</th>
            <th>Birthday </th>
            <th>Playstation ID </th>
            <th>Nintendo Network ID </th>
            <th>X-box Live </th>
            <th>Twitter </th>
            <th>Discord </th>
            <th>Facebook </th>
            <th>Check profile</th>
        </tr>
        <tbody>
        {% for user in userresults %}
            {% if user.visible == 1 %}
        <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.name }}</td>
                <td><img src="{{ asset('images/profilepictures/' ~ user.profilepicture) }}" alt="No profile picture found." style="max-width: 100px; max-height:100px;"></td>
                <td>{{ user.email }}</td>
                <td>{{ user.gender }}</td>
                <td>{{ user.birthday ? user.birthday|date('Y-m-d') : ''  }}</td>
                <td>{{ user.playstation }}</td>
                <td>{{ user.nintendo }}</td>
                <td>{{ user.xbox }}</td>
                <td>{{ user.twitter }}</td>
                <td>{{ user.discord }}</td>
                <td>{{ user.facebook }}</td>
                <td  style="text-align:center;"><a href="{{ path('profile_show', {'id': user.id}) }}"><i class="fas fa-eye"></i></a></td>
        </tr>
            {% endif %}
        {% endfor %}
        </tbody>
    </table> <br/>

        <h4>Posts:</h4>
        <table class="table">

            <tr>
                <th>Username</th>
                <th>Text</th>
                <th>Link</th>
                <th>Date/Time</th>
                <th>Check post</th>
            </tr>

            <tbody>
            {% for posts in postresults %}
                {% if posts.user.visible == 1 %}
            <tr>
                <td>{{ posts.user.name }}</td>
                <td>{{ posts.text }}</td>
                <td>
                    {% if posts.link == true %}
                        <iframe width="90%" height="100%"
                                src="{{ posts.link }}">
                        </iframe> <br/>
                    {% endif %}
                </td>
                <td>{{ posts.created ? posts.created|date('Y-m-d H:i:s') }}</td>
                <td> <a href="{{  path('posts_show', {'id': posts.id}) }}"><i class="fas fa-eye"></i></a> </td>
            </tr>
                {% endif %}
            {% endfor %}
            </tbody>
        </table>

    <a href="{{ path('home') }}">Back to home</a>
    </div>
    </div>



{% endblock %}